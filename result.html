<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exam Result | Bothverse Academy</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .result-box { max-width: 600px; margin: 40px auto; background: #1e293b; color: white; padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); }
        .score { font-size: 3.5rem; color: #22c55e; font-weight: bold; margin: 10px 0; text-shadow: 0 0 10px rgba(34, 197, 94, 0.3); }
        .review-card { background: #0f172a; padding: 15px; border-radius: 10px; margin-top: 15px; text-align: left; border-left: 5px solid #64748b; }
        .btn-home { background: #22c55e; color: white; border: none; padding: 15px; width: 100%; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 10px; font-size: 1rem; }
        .print-btn { background: #3b82f6; color: white; padding: 15px; margin-top: 20px; border-radius: 8px; width: 100%; cursor: pointer; border: none; font-weight: bold; }
        
        @media print {
            button, .print-btn, .btn-home, #review-list { display: none !important; }
            body { background: white !important; padding: 0; }
            .result-box { box-shadow: none !important; color: black !important; background: white !important; margin: 0; width: 100%; border: 2px solid #eee; }
            .score { color: #16a34a !important; }
            #student-meta { color: #334155 !important; font-weight: bold; }
        }
    </style>
</head>
<body class="light">
    <div class="result-box">
        <h1 style="margin-bottom: 5px;">Performance Report</h1>
        <p id="student-meta" style="color: #94a3b8; font-size: 1.1rem;"></p>
        
        <div class="score" id="display-score">-- / --</div>
        <div id="status-msg" style="font-size: 1.5rem; font-weight: bold; margin-bottom: 20px;"></div>

        <div id="review-list">
            <h3 style="text-align: left; border-bottom: 1px solid #334155; padding-bottom: 10px; color: #cbd5e1;">Review Your Choices</h3>
            <div id="cards-container"></div>
        </div>

        <button class="print-btn" onclick="window.print()">Download Marksheet üìÑ</button>
        <button class="btn-home" onclick="location.href='dashboard.html'">Back to Dashboard</button>
    </div>

    <script>
        window.onload = function () {
            const name = localStorage.getItem("studentName") || "Student";
            const cls = localStorage.getItem("studentClass") || "-";
            const score = localStorage.getItem("finalScore") || "0";
            const total = localStorage.getItem("finalTotal") || "0";
            const rawReview = localStorage.getItem("reviewData");

            document.getElementById("student-meta").innerText = `${name} | ${cls}`;
            document.getElementById("display-score").innerText = `${score} / ${total}`;

            const percent = Math.round((parseInt(score) / parseInt(total)) * 100);
            const statusBox = document.getElementById("status-msg");
            
            if (percent >= 50) {
                statusBox.innerHTML = "<span style='color:#22c55e'>PASS üéâ</span>";
            } else {
                statusBox.innerHTML = "<span style='color:#ef4444'>FAIL ‚ùå</span>";
            }

            // Review Cards display (Sahi/Galat ke logic ke bina, sirf choices dikhayega)
            if (rawReview) {
                const reviewData = JSON.parse(rawReview);
                const container = document.getElementById("cards-container");
                reviewData.forEach((item, i) => {
                    const card = document.createElement("div");
                    card.className = "review-card";
                    card.innerHTML = `
                        <div style="font-weight:bold; color: #f8fafc;">Q${i + 1}. ${item.question}</div>
                        <div style="color: #94a3b8; margin-top:5px;">Your Answer: <b style="color:#6366f1;">${item.options[item.selected] || "Skipped"}</b></div>
                    `;
                    container.appendChild(card);
                });
            }
        };
    </script>
</body>
</html>
